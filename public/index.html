<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cointhink: Cryptocoin Market Analysis</title>
  <script type="text/javascript" src="js/js.js"></script>
  <script type="text/javascript" src="js/elm.js"></script>
  <script type="text/javascript" src="js/d3.v4.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
</body>

<script type="text/javascript">
  let windowHostname = window.location.hostname
  let wsHost = windowHostname.length > 0 ? windowHostname : "localhost:2050"
  let wsUrl = ('https:' == document.location.protocol ? 'wss://' : 'ws://') + wsHost
  //wsUrl = "wss://cointhink.com/ws"
  let base = "BTC"
  let quote = "USD"
  let market = getParameterByName('m')
  if(market) {
    let pair = market.split(':')
    base = pair[0]
    quote = pair[1]
  }
  let main = Elm.Main.fullscreen({url: wsUrl, base: base, quote: quote});
  main.ports.setup.subscribe(function(){
    d3init()
  })
  main.ports.graphdata.subscribe(function(ob){
    d3draw(ob)
  })
</script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-139014-10']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</html>
